<div class="sidebar-wrapper">
  <!-- ğŸ“¥ NHáº¬P CSV -->
  <label class="btn-import">
    ğŸ“¥ Nháº­p CSV
    <input
      type="file"
      accept=".csv"
      (change)="handleCsvUpload($event)"
      hidden
    />
  </label>

  <!-- âœ… Preview CSV -->
  <div *ngIf="showPreview()" class="csv-preview">
    <h5>ğŸ“„ Xem trÆ°á»›c file: {{ fileName() }}</h5>
    <table>
      <thead>
        <tr>
          <th>TÃªn</th>
          <th>Email</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of csvPreview()">
          <td>{{ r.name }}</td>
          <td>{{ r.email }}</td>
        </tr>
      </tbody>
    </table>
    <div class="actions">
      <button class="btn-confirm" (click)="confirmImport()">
        âœ… Nháº­p ({{ importCount() }})
      </button>
      <button class="btn-cancel" (click)="cancelImport()">âœ– Há»§y</button>
    </div>
  </div>

  <!-- âœ… Hiá»ƒn thá»‹ thÃ´ng bÃ¡o nháº­p -->
  <div *ngIf="!showPreview() && importCount() !== null" class="import-result">
    âœ… ÄÃ£ nháº­p {{ importCount() }} ngÆ°á»i má»›i!
  </div>

  <!-- ğŸ§© NHÃ“M NGÆ¯á»œI NHáº¬N -->
  <div class="sidebar">
    <div class="sidebar-head">
      <h3>ğŸ“§ NhÃ³m ngÆ°á»i nháº­n</h3>
      <button class="btn-add" (click)="toggleAddForm()">
        {{ showAddForm() ? "âœ– Há»§y" : "ï¼‹ ThÃªm nhÃ³m" }}
      </button>
    </div>

    <!-- â• Form thÃªm nhÃ³m -->
    <div class="add-form" *ngIf="showAddForm()">
      <input
        type="text"
        [ngModel]="newGroupName()"
        (ngModelChange)="newGroupName.set($event)"
        placeholder="TÃªn nhÃ³m..."
        class="input"
      />

      <input
        type="color"
        [ngModel]="newGroupColor()"
        (ngModelChange)="newGroupColor.set($event)"
      />

      <button class="btn-save" (click)="addGroup()">LÆ°u</button>
    </div>

    <!-- ğŸ“‹ Danh sÃ¡ch nhÃ³m -->
    <ul class="group-list">
      <li *ngFor="let g of groups()" [style.border-left-color]="g.color">
        <span class="group-name">
          {{ g.name }}
          <small>({{ g.count }})</small>
        </span>
        <button class="btn-del" (click)="deleteGroup(g.id)">ğŸ—‘</button>
      </li>
    </ul>

    <!-- ğŸ“Š Tá»•ng -->
    <div class="total">Tá»•ng: {{ totalRecipients() }} ngÆ°á»i</div>
  </div>
</div>
