<div class="products-page">
  <div class="header">
    <h2>Products</h2>
    <div class="actions">
      <button class="btn primary" (click)="openCreateModal()">
        Ôºã T·∫°o s·∫£n ph·∫©m
      </button>
      <button class="btn" (click)="sendEmail()">üìß G·ª≠i email</button>
      <button class="btn" (click)="openScheduleModal()">üìÖ L√™n l·ªãch</button>
    </div>
  </div>

  <!-- B·ªô l·ªçc v√† c·ªôt -->
  <div class="toolbar">
    <div class="filter">
      <label>Danh m·ª•c:</label>
      <select [(ngModel)]="selectedCategory">
        <option *ngFor="let c of categories">{{ c }}</option>
      </select>
    </div>

    <div class="columns">
      <label>Hi·ªÉn th·ªã c·ªôt:</label>
      <div class="column-checkbox" *ngFor="let col of columns">
        <input
          type="checkbox"
          [(ngModel)]="col.visible"
          (change)="toggleColumn(col)"
        />
        <span>{{ col.label }}</span>
      </div>
    </div>
  </div>

  <!-- B·∫£ng s·∫£n ph·∫©m -->
  <table class="data-table">
    <thead>
      <tr>
        <th><input type="checkbox" /></th>
        <th *ngFor="let col of columns" [hidden]="!col.visible">
          {{ col.label }}
        </th>
        <th>H√†nh ƒë·ªông</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of filterProducts()">
        <td><input type="checkbox" [(ngModel)]="p.selected" /></td>
        <td *ngIf="columns[0].visible">{{ p.name }}</td>
        <td *ngIf="columns[1].visible">{{ p.desc }}</td>
        <td *ngIf="columns[2].visible">{{ p.sku }}</td>
        <td *ngIf="columns[3].visible">{{ p.price }}</td>
        <td *ngIf="columns[4].visible">
          <span
            [class.status-active]="p.status === 'ƒêang b√°n'"
            [class.status-inactive]="p.status === 'Ng·ª´ng b√°n'"
          >
            {{ p.status }}
          </span>
        </td>
        <td>
          <button class="btn danger small" (click)="deleteProduct(p.id)">
            üóë X√≥a
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="modal-backdrop" *ngIf="showScheduleModal">
    <div class="modal">
      <div class="modal-header">
        <h3>üìÖ L√™n l·ªãch g·ª≠i email</h3>
        <button class="close" (click)="closeScheduleModal()">‚úñ</button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Ng√†y</label>
          <input type="date" [(ngModel)]="scheduleDate" />
        </div>

        <div class="form-group">
          <label>Gi·ªù</label>
          <input type="time" [(ngModel)]="scheduleTime" />
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn" (click)="closeScheduleModal()">ƒê√≥ng</button>
        <button class="btn primary" (click)="saveSchedule()">
          üíæ L∆∞u l·ªãch
        </button>
      </div>
    </div>
  </div>
  <!-- Modal t·∫°o s·∫£n ph·∫©m -->
  <div class="modal-backdrop" *ngIf="showModal">
    <div class="modal">
      <div class="modal-header">
        <h3>Ôºã T·∫°o s·∫£n ph·∫©m m·ªõi</h3>
        <button class="close" (click)="closeCreateModal()">‚úñ</button>
      </div>

      <div class="modal-body">
        <label>T√™n s·∫£n ph·∫©m</label>
        <input [(ngModel)]="newProduct.name" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m" />

        <label>SKU</label>
        <input [(ngModel)]="newProduct.sku" placeholder="VD: CRM-001" />

        <label>Gi√°</label>
        <input [(ngModel)]="newProduct.price" placeholder="$0/th√°ng" />

        <label>M√¥ t·∫£</label>
        <textarea [(ngModel)]="newProduct.desc"></textarea>

        <label>Tr·∫°ng th√°i</label>
        <select [(ngModel)]="newProduct.status">
          <option>ƒêang b√°n</option>
          <option>Ng·ª´ng b√°n</option>
        </select>
      </div>

      <div class="modal-footer">
        <button class="btn" (click)="closeCreateModal()">ƒê√≥ng</button>
        <button class="btn primary" (click)="saveNewProduct()">üíæ L∆∞u</button>
      </div>
    </div>
  </div>
</div>
