<div class="activities-page">
  <!-- Thanh t√¨m ki·∫øm -->
  <div class="top-bar">
    <input placeholder="T√¨m ki·∫øm li√™n h·ªá, c√¥ng ty, ho·∫°t ƒë·ªông..." />
    <div class="actions">
      <button class="suggest">üí° G·ª£i √Ω b∆∞·ªõc ti·∫øp theo</button>
      <button class="create">+ T·∫°o ho·∫°t ƒë·ªông</button>
    </div>
  </div>

  <!-- L∆∞·ªõi 3 c·ªôt -->
  <div class="columns">
    <!-- LEFT: FORM -->
    <div class="col left">
      <div class="card">
        <h3>Ho·∫°t ƒë·ªông (Cu·ªôc g·ªçi / Cu·ªôc h·ªçp / Nhi·ªám v·ª• / Email)</h3>

        <!-- Tabs -->
        <div class="type-tabs">
          <button
            *ngFor="let tab of tabs"
            [class.active]="tab === activeTab"
            (click)="selectTab(tab)"
          >
            {{ tab }}
          </button>
        </div>

        <!-- Form -->
        <h4>T·∫°o ho·∫°t ƒë·ªông</h4>
        <div class="form-type">
          <button
            *ngFor="let t of formTabs"
            [class.active]="t === selectedType"
            (click)="selectType(t)"
          >
            {{ t }}
          </button>
        </div>

        <div class="form-group">
          <label>Ti√™u ƒë·ªÅ</label>
          <input
            [(ngModel)]="newActivity.title"
            placeholder="Nh·∫≠p ti√™u ƒë·ªÅ..."
          />
        </div>

        <div class="form-group">
          <label>Li√™n h·ªá</label>
          <input [(ngModel)]="newActivity.contact" />
        </div>

        <div class="form-group">
          <label>C√¥ng ty</label>
          <input [(ngModel)]="newActivity.company" />
        </div>

        <div class="form-group">
          <label>Ghi ch√∫</label>
          <textarea [(ngModel)]="newActivity.note"></textarea>
        </div>

        <div class="actions">
          <button class="create-btn" (click)="createActivity()">T·∫°o</button>
        </div>
      </div>
    </div>

    <!-- MIDDLE: TIMELINE -->
    <div class="col middle">
      <div class="card timeline">
        <h3>üïí Timeline 360¬∞</h3>

        <div *ngFor="let g of filteredGroups" class="timeline-group">
          <h4 class="timeline-section">{{ g.section }}</h4>
          <div *ngFor="let a of g.activities" class="timeline-item">
            <div class="icon">{{ getIcon(a.type) }}</div>
            <div class="info">
              <strong>{{ a.title }}</strong>
              <p>
                <span *ngIf="a.contact">Li√™n h·ªá: {{ a.contact }}</span>
                <span *ngIf="a.company"> | C√¥ng ty: {{ a.company }}</span> ‚Ä¢
                {{ a.time }}
              </p>
              <small *ngIf="a.note">üìù {{ a.note }}</small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: FILTER + AUTO -->
    <!-- RIGHT: FILTER + AUTO -->
    <div class="col right">
      <div class="card filter">
        <h3>üß≠ B·ªô l·ªçc</h3>

        <div class="filter-group">
          <label>B·∫£n ghi</label>
          <select [(ngModel)]="filter.recordType">
            <option>Li√™n h·ªá</option>
            <option>C√¥ng ty</option>
          </select>
        </div>

        <div class="filter-group">
          <label>Lo·∫°i ho·∫°t ƒë·ªông</label>
          <div class="tag-list">
            <span
              *ngFor="let t of ['Cu·ªôc g·ªçi', 'Cu·ªôc h·ªçp', 'Nhi·ªám v·ª•', 'Email']"
              [class.active]="filter.selectedTypes.has(t)"
              (click)="toggleType(t)"
            >
              {{ t }}
            </span>
          </div>
        </div>

        <div class="filter-group">
          <label>Tr·∫°ng th√°i</label>
          <select [(ngModel)]="filter.status">
            <option>M·ªü</option>
            <option>Ho√†n th√†nh</option>
          </select>
        </div>

        <div class="filter-group">
          <label>Kho·∫£ng th·ªùi gian</label>
          <select [(ngModel)]="filter.period">
            <option>7 ng√†y g·∫ßn ƒë√¢y</option>
            <option>30 ng√†y g·∫ßn ƒë√¢y</option>
            <option>90 ng√†y g·∫ßn ƒë√¢y</option>
          </select>
        </div>

        <div class="filter-group">
          <label>Ng∆∞·ªùi ph·ª• tr√°ch</label>
          <select [(ngModel)]="filter.assignee">
            <option>B·∫•t k·ª≥</option>
            <option>Huy</option>
            <option>Minh Anh</option>
            <option>Thu H√†</option>
          </select>
        </div>
      </div>

      <div class="card auto">
        <h3>‚öôÔ∏è T·ª± ƒë·ªông ho√°</h3>
        <p>
          <strong>Quy t·∫Øc:</strong> N·∫øu li√™n h·ªá kh√¥ng ƒë∆∞·ª£c ch·∫°m trong 14 ng√†y ‚Üí
          t·∫°o nhi·ªám v·ª• follow-up.
        </p>
        <p><strong>Giao cho:</strong> Ch·ªß s·ªü h·ªØu li√™n h·ªá</p>
        <p><strong>M·∫´u nhi·ªám v·ª•:</strong> Follow up ho·∫°t ƒë·ªông g·∫ßn nh·∫•t</p>
      </div>
    </div>
  </div>
</div>
